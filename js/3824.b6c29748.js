"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[3824],{93824:function(e,o,t){t.r(o),t.d(o,{default:function(){return n}});var a=t(21951),i={gotoTask:function(e){var o;-1!=e.busiFormUrl.indexOf("/contractTemplateEdit")?(o=(o=(o=e.busiFormUrl.replace("type=edit","type=detail")).replace("contractTemplateEdit","formatTemplateDetail")).replace("id=add","id="+e.busiId),o+="&taskId="+e.actTaskId,a.Z.replace(o)):-1!=e.busiFormUrl.indexOf("/performOperationProcess")?(o=e.busiFormUrl+"&taskId="+e.actTaskId+"&type=detail&id="+e.busiId,a.Z.replace(o)):"form_contract_info"==e.busiTypeId||"form_contract_change"==e.busiTypeId||"form_contract_relieve"==e.busiTypeId?a.Z.replace({path:"/automaticToExamine",query:{curNodeId:e.curNodeId,busiTypeId:e.busiTypeId,taskId:e.actTaskId,id:e.busiId,type:"edit"}}):"form_process_cancel"==e.busiTypeId?a.Z.replace({path:e.busiFormUrl,query:{taskId:e.actTaskId,type:e.curNodeEditFlag?"edit":"detail",id:e.busiId,dataType:"1"}}):a.Z.replace({path:e.busiFormUrl,query:{taskId:e.actTaskId,type:e.curNodeEditFlag?"edit":"detail",id:e.busiId}})},gotoTaskDetail:function(e){var o;-1!=e.busiFormUrl.indexOf("/contractTemplateEdit")?(o=(o=(o=e.busiFormUrl.replace("type=edit","type=detail")).replace("contractTemplateEdit","formatTemplateDetail")).replace("id=add","id="+e.busiId),a.Z.replace(o)):"form_contract_info"==e.busiTypeId?a.Z.replace({path:"/contractDetail",query:{type:"detail",id:e.busiId}}):"form_contract_relieve"==e.busiTypeId?a.Z.replace({path:e.busiFormUrl,query:{type:"detail",id:e.busiId,dataType:"1"}}):"/agreementChange"==e.busiFormUrl?a.Z.replace({path:e.busiFormUrl,query:{type:"detail",id:e.busiId,dataType:"2"}}):a.Z.replace({path:e.busiFormUrl,query:{type:"detail",id:e.busiId}})}},s=t(32906),r=t(31373),o={name:"sso",created:function(){var o=this;window.sessionStorage.getItem("code")?this.loginAuthentication():window.sessionStorage.getItem("menu")?this.loginDemo():window.sessionStorage.getItem("ticket")?this.loadSsoSession():window.sessionStorage.getItem("userid")?this.loadSsoForWork():window.sessionStorage.getItem("gotoTabPage")&&s.Z.loadSession().then(function(){var e=decodeURIComponent(window.sessionStorage.getItem("gotoTabPage"));o.$router.replace(e),window.sessionStorage.clear()}).catch(function(e){})},methods:{loginAuthentication:function(){var o=this;s.Z.removeSession();this.$ajax({method:"post",url:"/law/commonLogin/demoSSO",data:{code:window.sessionStorage.getItem("code")},doNotCheckCookie:!0,noLoading:!1,errorCallback:function(e){o.$router.replace({path:"/"})},callback:function(e){window.sessionStorage.removeItem("code")},successCallback:function(e){o.handleSso(e),o.$router.replace("/home")}})},loadSsoSession:function(){var o=this;s.Z.removeSession();this.$ajax({method:"post",data:{loginid_:window.sessionStorage.getItem("loginid_"),up_:window.sessionStorage.getItem("up_"),ticket:window.sessionStorage.getItem("ticket")},url:"/law/commonLogin/ssologin",doNotCheckCookie:!0,noLoading:!1,errorCallback:function(e){o.$router.replace({path:"/"})},callback:function(e){window.sessionStorage.removeItem("loginid_"),window.sessionStorage.removeItem("up_"),window.sessionStorage.removeItem("ticket")},successCallback:function(e){o.handleSso(e),o.$router.replace("/home")}})},loginDemo:function(){var c=this,l=window.sessionStorage.getItem("menu");this.$ajax({method:"post",data:{loginid:window.sessionStorage.getItem("loginid")},url:"/law/commonLogin/logindemo",noLoading:!1,errorCallback:function(e){c.$router.replace({path:"/"})},callback:function(e){window.sessionStorage.removeItem("loginid"),window.sessionStorage.removeItem("url")},successCallback:function(e){c.handleSso(e),c.asideOpen=!0,c.$router.replace({path:l});for(var o=e.data.data.item.menuRights,t=0;t<o.length;t++)for(var a=o[t].childs,i=0;i<a.length;i++)for(var s=a[i].childs,r=0;r<s.length;r++)for(var n=s[r].childs,d=0;d<n.length;d++){n[d].childs;if(n[d].url==l){s[r].isOpen=!0,c.menuIds[l]=n[d].objectid,c.menuIdIndex=t,c.menuIdIndex01=i,c.menuIdIndex02=r;break}}}})},loadSsoForWork:function(){var t=this;s.Z.removeSession();this.$ajax({method:"post",data:{approveuserid:window.sessionStorage.getItem("approveuserid"),workcode:window.sessionStorage.getItem("workcode"),userid:window.sessionStorage.getItem("userid")},url:"/law/commonLogin/ssologinForWork",doNotCheckCookie:!0,noLoading:!1,errorCallback:function(e){t.$router.replace({path:"/"})},callback:function(e){window.sessionStorage.removeItem("userid"),window.sessionStorage.removeItem("approveuserid")},successCallback:function(e){t.handleSso(e);var o=e.data.data.item.cicoIpAddr;t.$common.taskBack=function(){window.location.href=o+"/workflow/request/ViewRequestOS.jsp?reflush=1"},window.sessionStorage.getItem("task")?(e="/law/system/processApproval/loadProcessTask/"+window.sessionStorage.getItem("task"),t.$ajax({method:"get",url:e,noLoading:!1,errorCallback:function(e){t.$router.replace({path:"/"})},successCallback:function(e){e=e.data.data.task||{};i.gotoTask(e)}})):t.$router.replace("/home")}})},handleSso:function(e){r.S.setToken(e.data.data.token),r.S.setSessionId(e.data.data.sessionid),s.Z.handleSession(e)}}},n=(0,t(1001).Z)(o,function(){var e=this.$createElement;return(this._self._c||e)("div")},[],!1,null,"02307446",null).exports}}]);