"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[2198],{32198:function(t,e,a){a.r(e),a.d(e,{default:function(){return r}});var e=[function(){var t=this,e=t.$createElement,e=t._self._c||e;return e("div",{staticClass:"header"},[e("img",{attrs:{alt:"",src:a(85705)}}),t._v("   数字企业法务知识图谱 ")])},function(){var t=this,e=t.$createElement,e=t._self._c||e;return e("li",{staticClass:"toolbar-item"},[e("div",{staticClass:"icon-wrapper"},[e("i",{staticClass:"el-icon-data-analysis"})]),e("div",{staticClass:"item-name"},[t._v("筛选")])])},function(){var t=this.$createElement,t=this._self._c||t;return t("div",{staticClass:"icon-wrapper"},[t("i",{staticClass:"el-icon-download"})])},function(){var t=this.$createElement,t=this._self._c||t;return t("div",{staticClass:"icon-wrapper"},[t("i",{staticClass:"el-icon-zoom-in"})])},function(){var t=this.$createElement,t=this._self._c||t;return t("div",{staticClass:"icon-wrapper"},[t("i",{staticClass:"el-icon-zoom-out"})])},function(){var t=this.$createElement,t=this._self._c||t;return t("div",{staticClass:"icon-wrapper"},[t("i",{staticClass:"el-icon-refresh-right"})])},function(){var t=this.$createElement,t=this._self._c||t;return t("div",{staticClass:"icon-wrapper"},[t("i",{staticClass:"el-icon-full-screen"})])}],L=a(61814),i=a(25706),s=a(27671),o=a(47489),c=a(52465),n={name:"riskBehaviorGraph",setup:function(t,e){function d(t){var e=L.Ys(document.createElementNS(T,"g"));return e.append("circle").attr("r",6).attr("cx",7).attr("cy",8).attr("style","stroke: rgb(51, 51, 51); fill: rgb(255, 255, 255); stroke-width: 1;"),e.append("line").attr("x1",3).attr("x2",11).attr("y1",8).attr("y2",8).attr("style","stroke: rgb(51, 51, 51); fill: rgb(255, 255, 255); stroke-width: 1;"),e.append("line").attr("x1",7).attr("x2",7).attr("y1",4).attr("y2",12).attr("class","circle-plus-v").attr("style","stroke: rgb(51, 51, 51); fill: rgb(255, 255, 255); stroke-width: 1;").attr("visibility",function(){return t.data.folded?"visible":"hidden"}),e}var u,p,f,a=this,n=(0,i.iH)(null),h=(0,i.iH)(null),m=JSON.parse(JSON.stringify((0,s.h)().right)),v=(JSON.parse(JSON.stringify((0,s.h)().left)),1400),g=500,y=v/2,w=g/2,C=!1,x=1,_=0,b=0,E=(0,i.iH)(null),k=(0,i.qj)({width:250,show:!1,inTooltip:!1}),T="http://www.w3.org/2000/svg",S=L.G_s().nodeSize([70,300]),F=((0,i.bv)(function(){function s(t){var e=L.bT9(m),a=(S(e),e.descendants().forEach(function(t,e){t.id=e,t.y<_&&(_=t.y),t.x<b&&(b=t.x)}),e.descendants());function n(t){var e,a,n=0,n=0===t.source.depth?90:"type"===t.source.data.nodeType?t.source.y+130:t.source.y+180,n={source:{x:t.source.x,y:n},target:{x:t.target.x,y:t.target.y}};return n=(t=n).target.y-t.source.y,e=t.target.x-t.source.x,a=t.source.y,t=t.source.x,"M".concat(a," ").concat(t,"  H").concat(60+a,"  V").concat(t+e,"  H").concat(n+a)}(a=c.selectAll("g.node").data(a.slice(1),function(t,e,a,n){return t.id})).attr("transform",function(t,e,a){return"translate(".concat(t.y,", ").concat(t.x,")")}).select(".circle-plus-v").attr("visibility",function(t){return t.data.folded?"visible":"hidden"}),a.exit().remove();var r=(a=a.enter().append(function(t,e,a){return document.createElementNS(T,"g")}).attr("transform",function(t,e,a){return"translate(".concat(t.y,", ").concat(t.x,")")}).attr("node-type",function(t){return t.data.nodeType}).attr("class","node").attr("cursor","pointer").on("click",function(t,e,a){var n;0!==t.depth&&t.data.hasChildren&&!C&&(t.data.children?(t.data.children=void 0,t.data.folded=!0):(t.data.folded=!1,t.data._children?t.data.children=t.data._children:(t.data.children=[{name:(n=t.data.name)+"_1",value:123},{name:n+"_2",value:321}],t.data._children=t.data.children)),s())})).filter('[node-type="type"]');r.append("text").text(function(t,e,a){return t.data.name}).attr("text-anchor","start").attr("stoke","white").attr("dy",5).attr("x",30),r.append("circle").attr("cx",5).attr("cy",0).attr("r",5).attr("fill","#32C5FF"),r.append("polygon").attr("points","0 5, 10 0, 0 -5").attr("fill","#008BF8").attr("transform","translate(15, 0), rotate(0)"),r.filter(function(t,e,a){return t.data.hasChildren}).append(function(t,e,a){return d(t).node()}).attr("transform","translate(115, -8)");(r=a.filter('[node-type="detail"]')).append("rect").attr("width",160).attr("height",30).attr("fill","#fff").attr("stroke","deepskyblue").attr("y",-15),r.nodes().forEach(function(t){t.addEventListener("mouseenter",function(t){setTimeout(function(){k.show=!0,E.value.style.left=t.clientX+15+"px",E.value.style.top=t.clientY+15+"px"},300)}),t.addEventListener("mouseleave",function(t){setTimeout(function(){k.inTooltip||(k.show=!1)},200)})});var i=r.append("text").text(function(t,e,a){return t.data.name}).attr("text-anchor","start").attr("stoke","white").attr("dy",5).attr("x",5),a=(setTimeout(function(){i.nodes().forEach(function(t){for(var e=t,a=160,n=L.Ys(e),r=n.text(),i=e.getComputedTextLength();a<i&&0<r.length;)r=r.slice(0,-1),n.text(r+"..."),i=e.getComputedTextLength()})}),r.filter(function(t,e,a){return t.data.hasChildren}).append(function(t){return d(t).node()}).attr("transform","translate(".concat(165,", -8)")),e.links());(r=l.selectAll("path").data(a)).attr("d",function(t,e,a){return n(t)}).exit().remove(),r.enter().append("path").attr("d",function(t,e,a){return n(t)}).attr("fill","none").attr("stroke","#000")}function e(t){var e=t.clientX-n,t=t.clientY-r;Math.abs(e)<10&&Math.abs(t)<10||(C=!0,y=i+e,w=o+t,p.attr("transform","translate(".concat(y,", ").concat(w,") scale(").concat(x,")")))}function a(t){0===t.button&&(setTimeout(function(){C=!1}),document.removeEventListener("mousemove",e),document.removeEventListener("mouseup",a))}var n,r,i,o,t=h.value.getBoundingClientRect(),t=(v=t.width,g=t.height,y=v/2,w=g/2,(u=L.Ys(".diagram-wrapper").attr("width",v).attr("height",g)).append("rect").attr("width",v).attr("height","100%").attr("fill","white").attr("class","svg-bg").attr("visibility","hidden"),(p=u.append("g").attr("class","diagram-content").attr("transform","translate(".concat(v/2,", ").concat(g/2,") scale(").concat(x,")"))).append("g").attr("class","root-group").attr("cursor","pointer").attr("transform","translate(0, 0)")),t=(t.append("rect").attr("width",180).attr("height",40).attr("fill","rgb(0, 139, 248)").attr("x",-90).attr("y",-20),t.append("text").text("根节点").attr("fill","white").attr("font-size","13").attr("x",-85).attr("y",4),t.append("circle").attr("cx",0).attr("cy",0).attr("r",5).attr("fill","yellow"),p.append("g").attr("class","right-group")),c=t.append("g").attr("class","node-group"),l=t.append("g").attr("class","link-group"),t=p.append("g").attr("class","left-group"),t=(t.append("g").attr("class","node-group"),t.append("g").attr("class","link-group"),s(),f=function(){s()},u.node());t.addEventListener("mousedown",function(t){0===t.button&&(n=t.clientX,r=t.clientY,i=y,o=w,document.addEventListener("mousemove",e),document.addEventListener("mouseup",a))}),t.addEventListener("wheel",function(t){t.stopPropagation();t=t.deltaY;F(t<0?"big":"small"),p.attr("transform","translate(".concat(y,", ").concat(w,") scale(").concat(x,")"))})}),function(t){"big"===t?2.5<(x*=1.25)&&(x=2.4414):"small"===t&&(x/=1.25)<.5&&(x=.512),p.attr("transform","translate(".concat(y,", ").concat(w,") scale(").concat(x,")"))}),r=(0,i.iH)(!1);(0,i.YP)(r,function(){if(!o.Z.isEnabled)return a.$message({message:"你的浏览器不支持全屏",type:"warning"}),!1;o.Z.toggle()}),o.Z.on("change",function(){r.value=o.Z.isFullscreen,setTimeout(function(){var t;t=h.value.getBoundingClientRect(),v=t.width,g=t.height,y=v/2,w=g/2,u=L.Ys(".diagram-wrapper").attr("width",v).attr("height",g),p.attr("transform","translate(".concat(v/2,", ").concat(g/2,") scale(").concat(x,")"))},500)});return{tooltip:E,tooltipOption:k,enterTooltip:function(t){k.inTooltip=!0},leaveTooltip:function(t){k.inTooltip=!1,k.show=!1},main:n,diagram:h,refresh:function(){m=(0,s.h)().right,y=v/2,w=g/2,x=1,p.attr("transform","translate(".concat(y,", ").concat(w,") scale(").concat(x,")")),f(m)},zoom:F,isFullScreen:r,saveAsPng:function(){var t=h.value.cloneNode(!0),e=(t.style.width=0,t.style.height=0,t.style.overflow="hidden",document.body.appendChild(t),L.Ys(t).select(".diagram-wrapper")),a=(e.select(".svg-bg").attr("visibility","visible"),e.select(".diagram-content")),n=(a.attr("transform","scale(1)"),a.node().getBoundingClientRect()),r=n.width,n=n.height,r=(e.attr("width",r+200).attr("height",n+200),a.attr("transform","translate(".concat(100-_,", ").concat(110-b,") scale(1)")),document.createElement("canvas")),n=r.getContext("2d"),a=(c.wh.fromString(n,e.node().outerHTML).start(),document.body.removeChild(t),r.toDataURL("image/png")),n=document.createElement("a"),e=(n.href=a,n.download="download.png",document.createEvent("MouseEvents"));e.initEvent("click",!0,!1),n.dispatchEvent(e)}}}},r=(0,a(1001).Z)(n,function(){var e=this,t=e.$createElement,t=e._self._c||t;return t("div",{staticClass:"knowledge-graph",attrs:{onselectstart:"return false;"}},[e._m(0),t("div",{ref:"main",staticClass:"main",class:["main",{"full-screen":e.isFullScreen}],attrs:{id:"main"}},[t("div",{ref:"diagram",staticClass:"diagram"},[t("svg",{staticClass:"diagram-wrapper",attrs:{cursor:"move"}})]),t("ul",{staticClass:"toolbar"},[e._m(1),t("li",{staticClass:"toolbar-item",on:{click:e.saveAsPng}},[e._m(2),t("div",{staticClass:"item-name"},[e._v("下载")])]),t("li",{staticClass:"toolbar-item",on:{click:function(t){return e.zoom("big")}}},[e._m(3),t("div",{staticClass:"item-name"},[e._v("放大")])]),t("li",{staticClass:"toolbar-item",on:{click:function(t){return e.zoom("small")}}},[e._m(4),t("div",{staticClass:"item-name"},[e._v("缩小")])]),t("li",{staticClass:"toolbar-item",on:{click:e.refresh}},[e._m(5),t("div",{staticClass:"item-name"},[e._v("刷新")])]),t("li",{staticClass:"toolbar-item",on:{click:function(t){e.isFullScreen=!e.isFullScreen}}},[e._m(6),t("div",{staticClass:"item-name"},[t("span",{directives:[{name:"show",rawName:"v-show",value:e.isFullScreen,expression:"isFullScreen"}]},[e._v("退出全屏")]),t("span",{directives:[{name:"show",rawName:"v-show",value:!e.isFullScreen,expression:"!isFullScreen"}]},[e._v("全屏")])])])]),t("transition",{attrs:{name:"el-fade-in"}},[t("div",{directives:[{name:"show",rawName:"v-show",value:e.tooltipOption.show,expression:"tooltipOption.show"}],ref:"tooltip",staticClass:"diagram-tooltip",on:{mouseenter:e.enterTooltip,mouseleave:e.leaveTooltip}},[t("p",[e._v("333333")]),t("p",[e._v("333333")]),t("p",[e._v("333333")]),t("p",[e._v("333333")])])])],1)])},e,!1,null,"400bccb7",null).exports},27671:function(t,e,a){a.d(e,{h:function(){return n}});var n=function(){return{left:{name:"flare",children:[{name:"left_1",folded:!0,hasChildren:!0},{name:"left_2",folded:!0,hasChildren:!0}]},right:{name:"flare",children:[{name:"条款来源",nodeType:"type",hasChildren:!0,folded:!0,direction:"right",_children:[{name:"承租方不承担租赁物的保管责任/承租方不对设备及……",nodeType:"detail",folded:!0,hasChildren:!0},{name:"出租方承担租赁物的保管责任/出租方对设备及人员……",nodeType:"detail",folded:!0}]},{name:"相对方来源",nodeType:"type",direction:"right",hasChildren:!0,folded:!0},{name:"其他来源",nodeType:"type",direction:"right",hasChildren:!0,folded:!1},{name:"风险实例",nodeType:"type",direction:"left",hasChildren:!1,folded:!0}]}}}},85705:function(t,e,a){t.exports=a.p+"img/robot.45898636.png"}}]);